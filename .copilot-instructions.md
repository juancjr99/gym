# Gym App - Instrucciones para Copilot

## Descripción del Proyecto
Esta es una aplicación Flutter para llevar el registro de entrenamientos en el gimnasio. La app permite crear rutinas tradicionales y de circuito, registrar series, repeticiones, peso y tiempo, y comparar entrenamientos anteriores.

## Buenas Prácticas Obligatorias

### 1. Arquitectura y Gestión de Estado
- **OBLIGATORIO**: Utilizar **BLoC (Business Logic Component)** como gestor de estado principal
- **PROHIBIDO**: Usar StatefulWidgets - reemplazar con StatelessWidget + BLoC
- Separar la lógica de negocio de la UI usando el patrón BLoC
- Implementar eventos y estados claros para cada funcionalidad
- Usar `flutter_bloc` para la implementación del patrón

### 2. Material Design 3
- **OBLIGATORIO**: Implementar Material Design 3 (Material You)
- Usar `useMaterial3: true` en el ThemeData
- Implementar esquemas de color dinámicos con `ColorScheme.fromSeed()`
- Utilizar componentes M3: NavigationBar, NavigationRail, etc.
- Seguir las guías de espaciado y tipografía de M3

### 3. Estructura de Archivos
```
lib/
├── main.dart
├── app/
│   ├── app.dart
│   └── routes/
├── core/
│   ├── constants/
│   ├── theme/
│   ├── utils/
│   └── extensions/
├── data/
│   ├── models/
│   ├── repositories/
│   └── datasources/
├── domain/
│   ├── entities/
│   ├── repositories/
│   └── usecases/
├── presentation/
│   ├── bloc/
│   ├── pages/
│   ├── widgets/
│   └── common/
└── injection/
    └── dependency_injection.dart
```

### 4. Modelos de Datos Principales

#### Ejercicio
```dart
class Exercise {
  final String id;
  final String name;
  final String category;
  final ExerciseType type; // weight, time, bodyweight
  final String? description;
  final String? imageUrl;
  final List<String> muscleGroups;
}
```

#### Rutina
```dart
class Routine {
  final String id;
  final String name;
  final String? description;
  final List<RoutineExercise> exercises;
  final RoutineType type; // traditional, circuit
  final DateTime createdAt;
  final DateTime updatedAt;
}
```

#### Registro de Entrenamiento
```dart
class WorkoutRecord {
  final String id;
  final String routineId;
  final DateTime date;
  final Duration totalDuration;
  final List<ExerciseRecord> exerciseRecords;
  final String? notes;
}
```

#### Registro de Ejercicio
```dart
class ExerciseRecord {
  final String exerciseId;
  final List<SetRecord> sets;
  final Duration? totalTime; // para ejercicios por tiempo
}
```

### 5. Funcionalidades Requeridas

#### Gestión de Rutinas
- Crear rutinas tradicionales (series x repeticiones)
- Crear rutinas de circuito
- Editar y eliminar rutinas
- Duplicar rutinas
- Organizar ejercicios por orden

#### Registro de Entrenamientos
- Seleccionar rutina del día
- Registrar peso, repeticiones, tiempo
- Cronómetro para descansos
- Notas por ejercicio
- Guardar progreso automáticamente

#### Análisis y Comparación
- Historial de entrenamientos
- Gráficos de progreso por ejercicio
- Comparación con entrenamientos anteriores
- Estadísticas de rendimiento
- Máximos personales (PR)

### 6. Reglas de Código

#### Widgets
- **NUNCA** usar StatefulWidget, siempre StatelessWidget + BLoC
- Crear widgets reutilizables para componentes comunes
- Usar const constructors cuando sea posible
- Implementar keys apropiadas para widgets de lista

#### Gestión de Estado
```dart
// ✅ CORRECTO
class WorkoutPage extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    return BlocProvider(
      create: (context) => WorkoutBloc(),
      child: BlocBuilder<WorkoutBloc, WorkoutState>(
        builder: (context, state) {
          // UI basada en estado
        },
      ),
    );
  }
}

// ❌ INCORRECTO
class WorkoutPage extends StatefulWidget {
  // No usar StatefulWidget
}
```

#### Navegación
- Usar named routes con GoRouter
- Implementar navegación tipo-segura
- Manejar deep links apropiadamente

#### Persistencia de Datos
- Usar SQLite con Floor/Drift para datos locales
- Implementar patrón Repository
- Crear abstracciones para fuentes de datos

### 7. Dependencias Requeridas
```yaml
dependencies:
  flutter_bloc: ^8.1.3
  equatable: ^2.0.5
  go_router: ^12.1.1
  floor: ^1.4.2
  uuid: ^4.1.0
  intl: ^0.18.1
  shared_preferences: ^2.2.2
  charts_flutter: ^0.12.0
```

### 8. Tema y UI
- Usar sistema de colores semánticos
- Implementar modo claro y oscuro
- Responsive design para tablets
- Animaciones fluidas con Material motion
- Accesibilidad completa (semantics, contrast, etc.)

### 9. Testing
- Unit tests para BLoCs y repositories
- Widget tests para componentes UI
- Integration tests para flujos principales
- Mocking apropiado para dependencias

### 10. Reglas Específicas para Entrenamientos

#### Tipos de Ejercicios
1. **Por Peso**: series x repeticiones + peso
2. **Por Tiempo**: tiempo total (ej: plank, cardio)
3. **Peso Corporal**: series x repeticiones sin peso

#### Flujo de Entrenamiento
1. Seleccionar rutina
2. Iniciar entrenamiento
3. Completar ejercicios uno por uno
4. Registrar datos (peso/reps/tiempo)
5. Guardar automáticamente
6. Mostrar resumen final

#### Comparación de Progreso
- Mostrar último entrenamiento de mismo ejercicio
- Indicadores visuales de mejora/retroceso
- Gráficos de tendencia temporal
- Notificaciones de nuevos récords

## Comandos Útiles
```bash
# Generar modelos Floor
flutter packages pub run build_runner build

# Correr tests
flutter test

# Análisis de código
flutter analyze
```

## Notas Importantes
- Siempre validar entrada de datos
- Manejar errores graciosamente
- Mantener UX fluida durante registros
- Backup automático de datos
- Permitir exportación de datos
